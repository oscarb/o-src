---
title: Synology DS713+ guide
tags:
  - nas
published: true
---

# Synology DS713+ Guide

* TOC
{:toc}

## Device information

    CPU Model: Intel Atom D2700 x86_64 
    GHz: 2.13 
    Cores: 2 
    Threads: 4 
    FPU: yes 
    Package Arch: x86 cedarview 
    RAM: 64-bit@DDR3 1GB
    
## Shell commands

Command | Description
--------|------------
`sudo -i` | Enter root
`ssh -i ~/.ssh/id_rsa admin@ds713` | Log in using key

* [Linux Grep OR, Grep AND, Grep NOT Operator Examples](http://www.thegeekstuff.com/2011/10/grep-or-and-not-operators)


## Installing packages

### Package Center

DSM > Package Center

#### Debian chroot

### ipkg

	ipkg update
    ipkg install nano
    
### Docker

* [Dockerfile reference](https://docs.docker.com/engine/reference/builder/)

### pip

### opkg

See [Optware replacement - 1700+ packages (arm & x86) - Synology Forum](https://forum.synology.com/enu/viewtopic.php?t=95346)

## Email with sSMTP

Config: `/etc/ssmtp/ssmtp.conf`

## Updating DSM

When DSM is updated, sometimes access to ipkg and optware is lost.

### Access ipkg and optware after DSM update

0. `/opt/bin/nano /etc/profile`
0. Add to the bottom of the file
```
PATH=$PATH:/opt/bin:/opt/sbin # Keep bootstrap on update
PATH=$PATH:/volume1/@appstore/python/bin/ # Add Python binaries to PATH
export PATH
```
0. `source /etc/profile`
0. Repeat from step 1 for `/root/.profile`
0. Verify with `ipkg -v`
0. Run `ipkg update` 

#### Sources
* Preserve your path through DSM updates ([Synology Forum](http://forum.synology.com/enu/viewtopic.php?f=40&t=95756))

### Verify

#### Autostart script

See `/etc/rc.local`

#### pip

    pip install pip --upgrade
    
#### FlexGet

    flexget --version
    pip install flexget --upgrade
    flexget -c /volume1/apps/flexget/config.yml check
    flexget -c /volume1/apps/flexget/config.yml --test execute
    more /volume1/apps/flexget/flexget.log | grep WARNING
    more /volume1/apps/flexget/flexget.log | grep ERROR
    more /volume1/apps/flexget/flexget.log | grep CRITICAL
    

#### Subliminal

    subliminal --addic7ed oscarb {ADDIC7ED_PASSWORD} --cache-dir /volume1/apps/subliminal/ download --language en --provider addic7ed --provider podnapisi --provider opensubtitles --provider subscenter --provider thesubdb --provider tvsubtitles  --age 2d /volume1/downloads/tv/
    
    
## Login with SSH keys

0. Install PuTTYGen
0. Generate SSH-2 RSA 1024 bit keys
0. Login as admin
0. `mkdir ~/.ssh`
0. `echo "public key from PuTTy" >> ~/.ssh/authorized_keys`
0. `chmod 700 ~/.ssh`
0. `chmod 600 ~/.ssh/authorized_keys`
0. Save private key
0. Create new PuTTY session 
0. Auto-login as admin
0. Load private file

### Resources

* Howto: Login to your Synology via SSH with a keypair ([www.mauchle.name](http://www.mauchle.name/blog/?p=239))
* Trying to do ssh authentication with key files: server refused our key ([askubuntu.com](http://askubuntu.com/questions/306798/trying-to-do-ssh-authentication-with-key-files-server-refused-our-key))
* Pubkey SSH for non-root users ([forum.synology.com](https://forum.synology.com/enu/viewtopic.php?t=49585))
* How to setup passwordless SSH access for root user ([askubuntu.com](http://askubuntu.com/questions/115151/how-to-setup-passwordless-ssh-access-for-root-user))
* How can I save my passphrase for an SSH server in PuTTY? ([superuser.com](http://superuser.com/questions/211174/how-can-i-save-my-passphrase-for-an-ssh-server-in-putty))


## node.js projects

* [Installing Node.js on my new Synology - Gridshore](http://www.gridshore.nl/2011/04/04/installing-node-js-on-my-new-synology/)
* [Node.js app with forever running as a service daemon](http://www.slidequest.com/q/70ang)

## See list of connected devices from ASUS router

```
ssh -i /volume1/homes/admin/.ssh/tatanga-private-key  rt-ac68u-oscar@192.168.1.1 "/usr/sbin/nvram get client_info_tmp"
``` 

### Findings

* Generate SSH keys from terminal
* Copy files from remote using `scp`

### To research

* Add PHP extension SSH2
	* http://kvz.io/blog/2007/07/24/make-ssh-connections-with-php/
    * http://stackoverflow.com/questions/6270419/how-to-execute-ssh-commands-via-php
* Install webserver on router?


## Problems and solutions

### Insufficient capacity for upgrade

See available space on system partition

    df -h
   
See disk usage for directories 

    du -achx --max-depth=1 /

Narrow down and remove unused large directories and files

### Resources

* Synology DiskStation system partition is not large enough  ([General Hardware Forum - Spiceworks](https://community.spiceworks.com/topic/1540088-synology-diskstation-system-partition-is-not-large-enough))
* Insufficient capacity for update ([Synology Forum ](https://forum.synology.com/enu/viewtopic.php?f=7&t=28360))


## Reindex media folders

```
 synoindex -R /volume1/path/to/media/folder
```

## Python 

### Python 3

```
volume1/\@appstore/python3/usr/bin/python3
```